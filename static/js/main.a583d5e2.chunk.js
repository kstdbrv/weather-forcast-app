(this["webpackJsonpcreate-react-app-ts"]=this["webpackJsonpcreate-react-app-ts"]||[]).push([[0],{28:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"showLoaderForcast",(function(){return _})),n.d(a,"hideLoaderForcast",(function(){return m})),n.d(a,"showLoaderPast",(function(){return v})),n.d(a,"hideLoaderPast",(function(){return x}));var c={};n.r(c),n.d(c,"getDate",(function(){return E}));var r={};n.r(r),n.d(r,"fetch7DayForecast",(function(){return N})),n.d(r,"fetchPastForecast",(function(){return H}));var s={};n.r(s),n.d(s,"getLocation",(function(){return P}));var i,u,o=n(7),l=n.n(o),d=(n(28),n(1)),j=n.n(d),f=n(23),O=n(3),p=(n(35),n(36),[{name:"Select city",disabled:!0,hidden:!0},{name:"\u0421\u0430\u043c\u0430\u0440\u0430",lat:"53.195873"},{name:"\u0422\u043e\u043b\u044c\u044f\u0442\u0442\u0438",lat:"53.507836"},{name:"\u0421\u0430\u0440\u0430\u0442\u043e\u0432",lat:"51.533557"},{name:"\u041a\u0430\u0437\u0430\u043d\u044c",lat:"55.796127"},{name:"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440",lat:"45.035470"}]),b=n(5),h=n(2);function _(){return{type:i.SHOW_LOADER_FORECAST}}function m(){return{type:i.HIDE_LOADER_FORECAST}}function v(){return{type:i.SHOW_LOADER_PAST}}function x(){return{type:i.HIDE_LOADER_PAST}}function E(e){return{type:u.GET_DATE,unixDate:e}}!function(e){e.SHOW_LOADER_FORECAST="SHOW_LOADER_FORECAST",e.HIDE_LOADER_FORECAST="HIDE_LOADER_FORECAST",e.SHOW_LOADER_PAST="SHOW_LOADER_PAST",e.HIDE_LOADER_PAST="HIDE_LOADER_PAST"}(i||(i={})),function(e){e.GET_DATE="GET_DATE",e.GET_LOCATION="GET_LOCATION"}(u||(u={}));var D,g,T=n(6),A=n.n(T),S=n(11),w=n(8),y=n.n(w),C=y.a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),F=y.a.CancelToken.source(),L=y.a.isCancel;!function(e){e.FETCH_7DAYSFORECAST="FETCH_7DAYSFORECAST"}(D||(D={})),function(e){e.FETCH_PAST_FORECAST="FETCH_PAST_FORECAST"}(g||(g={}));var R="43970c1fd0eb1ec3e95ad78e5bda6745";function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var a=Object(S.a)(A.a.mark((function a(c){var r,s;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c(_()),r="/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=").concat(n,"&units=metric&appid=").concat(R),a.next=5,C.get(r,{cancelToken:F.token});case 5:s=a.sent,c({type:D.FETCH_7DAYSFORECAST,data:s.data}),c(m()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),L(a.t0)?(console.log("Request canceled",a.t0.message),c(m())):c(m());case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}function H(){return function(){var e=Object(S.a)(A.a.mark((function e(t,n){var a,c,r,s,i,u,o,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),c=a.pastCardInfo,r=c.unixDate,s=c.cityLocation,null!==r&&null!==s){e.next=5;break}return e.abrupt("return");case 5:return i=s.lat,u=s.lon,e.prev=6,t(v()),o="/onecall/timemachine?lat=".concat(i,"&lon=").concat(u,"&dt=").concat(r,"&units=metric&appid=").concat(R),e.next=11,C.get(o,{cancelToken:F.token});case 11:l=e.sent,t({type:g.FETCH_PAST_FORECAST,data:l.data}),t(x()),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),L(e.t0)?(console.log("Request canceled",e.t0.message),t(x())):t(x());case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t,n){return e.apply(this,arguments)}}()}function P(e,t){return function(n){n({type:u.GET_LOCATION,cityLocation:{lat:e,lon:t}}),n(H())}}var I=Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},a),c),s),r),k=function(){var e=Object(O.b)();return Object(b.bindActionCreators)(I,e)},W=n(0),G=function(e){var t=e.forecast7DaysData,n=k().fetch7DayForecast,a=["select-future__city",Object.keys(t).length?"select-future__city--active":null];return Object(W.jsx)("form",{className:"card-forcast__select select-future",children:Object(W.jsx)("select",{onChange:function(e){var t=e.target.value;switch(t){case"53.195873":return n(t,"50.100193");case"53.507836":return n(t,"49.420393");case"51.533557":return n(t,"46.034257");case"55.796127":return n(t,"49.106405");case"45.035470":return n(t,"38.975313");default:return}},className:a.join(" "),defaultValue:"Select city",children:p.map((function(e){return Object(W.jsx)("option",{value:e.lat,disabled:e.disabled,hidden:e.hidden,children:e.name},e.name)}))})})},M=(n(57),function(){return Object(W.jsx)("div",{className:"loader-centre",children:Object(W.jsxs)("div",{className:"lds-roller",children:[Object(W.jsx)("div",{}),Object(W.jsx)("div",{}),Object(W.jsx)("div",{}),Object(W.jsx)("div",{}),Object(W.jsx)("div",{}),Object(W.jsx)("div",{}),Object(W.jsx)("div",{}),Object(W.jsx)("div",{})]})})});function Y(e){var t=new Date(1e3*e),n=t.getDate();n<10&&(n="0"+n);var a=t.getFullYear();return n+" "+function(){switch(t.getMonth()+1){case 1:return"jan";case 2:return"feb";case 3:return"mar";case 4:return"apr";case 5:return"may";case 6:return"jun";case 7:return"jul";case 8:return"aug";case 9:return"sep";case 10:return"oct";case 11:return"nov";case 12:return"dec";default:return}}()+" "+a}n(58);var J=function(e){var t,n=Object(O.c)((function(e){return e.forecastData}));if(window.screen.width>768&&e.currentShowCards.length)t=e.currentShowCards;else if(window.screen.width<768)t=n.daily;else{t=[0,1,2].map((function(e){return n.daily[e]}))}return t.map((function(e){var t=Y(e.dt),n=Math.round(e.temp.eve);return Object(W.jsxs)("div",{className:"unit-forecast",children:[Object(W.jsx)("p",{className:"unit-forecast__date",children:t}),e.weather.map((function(e){var t="http://openweathermap.org/img/wn/"+e.icon+"@2x.png";return Object(W.jsx)("img",{className:"unit-forecast__image",src:t,alt:e.description},e.id)})),Object(W.jsxs)("div",{className:"unit-forecast__tmp",children:[Object(W.jsx)("span",{className:"unit-forecast__num",children:n>=0?"+".concat(n):n}),Object(W.jsx)("span",{children:"\xb0"})]})]},e.dt)}))},V=n.p+"static/media/placeholder.1a7907bc.svg",q=(n(59),function(){return Object(W.jsxs)(j.a.Fragment,{children:[Object(W.jsx)("img",{className:"card-forcast__placeholder",src:V,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0432\u043c\u0435\u0441\u0442\u043e \u043f\u043e\u0433\u043e\u0434\u044b"}),Object(W.jsx)("p",{className:"card-forcast__text",children:"Fill in all the fields and the weather will be displayed"})]})}),B=function(){var e=Object(O.c)((function(e){return e.app})).loading7DaysForecast,t=Object(O.c)((function(e){return e.forecastData})),n=Object(d.useRef)([0,1,2]),a=Object(d.useState)([]),c=Object(f.a)(a,2),r=c[0],s=c[1],i=n.current.includes(7),u=n.current.includes(0),o=["arrow arrow-prev",u?"arrow--disabled":""],l=["arrow arrow-next",i?"arrow--disabled":""];return Object(W.jsxs)("article",{className:"card-forcast card-forcast--future",children:[Object(W.jsx)("h3",{className:"card-forcast__title",children:"7 Days Forecast"}),Object(W.jsx)(G,{forecast7DaysData:t}),e?Object(W.jsx)(M,{}):t.hourly?Object(W.jsx)("div",{className:"card-forcast__wrapper",children:Object(W.jsxs)("div",{className:"card-forcast__overflow",children:[Object(W.jsx)(J,{currentShowCards:r}),Object(W.jsx)("button",{className:o.join(" ").trim(),onClick:function(){if(!u){var e=n.current.map((function(e){return e-1}));n.current=e;var a=e.map((function(e){return t.daily[e]}));s((function(e){return a}))}}}),Object(W.jsx)("button",{className:l.join(" ").trim(),onClick:function(){if(!i){var e=n.current.map((function(e){return e+1}));n.current=e;var a=e.map((function(e){return t.daily[e]}));s((function(e){return a}))}}})]})}):Object(W.jsx)(q,{})]})},U=(n(60),O.c),z=function(){var e=k().getLocation,t=["select-past__city",null===U((function(e){return e.pastCardInfo.cityLocation}))?null:"select-past__city--active"];return Object(W.jsx)("select",{onChange:function(t){var n=t.target.value;switch(n){case"53.195873":return e(n,"50.100193");case"53.507836":return e(n,"49.420393");case"51.533557":return e(n,"46.034257");case"55.796127":return e(n,"49.106405");case"45.035470":return e(n,"38.975313");default:return}},className:t.join(" ").trim(),defaultValue:"Select city",children:p.map((function(e){return Object(W.jsx)("option",{value:e.lat,disabled:e.disabled,hidden:e.hidden,children:e.name},e.name)}))})},K=(n(61),(new Date).getTime()),Q=new Date(K-432e6).toJSON().slice(0,10),X=function(){var e=U((function(e){return e.pastCardInfo})).unixDate,t=Object(d.useRef)(null),n=Object(d.useRef)(null);Object(d.useEffect)((function(){var a=t.current,c=n.current,r=function(){c.classList.add("select-past__hide-placeholder")},s=function(){c.classList.remove("select-past__hide-placeholder")};return a.addEventListener("focus",r),e||a.addEventListener("blur",s),function(){a.removeEventListener("focus",r),a.removeEventListener("blur",s)}}),[e]);var a=k(),c=a.getDate,r=a.fetchPastForecast,s=["select-past__date",null===e?null:"select-past__date--active"];return Object(W.jsxs)("div",{className:"select-past__wrapper",ref:n,children:[Object(W.jsx)("input",{className:s.join(" ").trim(),type:"date",ref:t,onChange:function(e){var t=e.target.value,n=new Date("".concat(t)).getTime()/1e3;n>Date.now()/1e3||(c(n),r())},min:Q,max:(new Date).toJSON().slice(0,10)}),Object(W.jsx)("p",{className:"select-past__placeholder",children:"Select date"})]})},Z=(n(62),function(){var e=Object(O.c)((function(e){return e.pastData})),t=e.hourly[11],n=Y(e.current.dt),a=Math.round(t.temp);return Object(W.jsxs)("div",{className:"card-forcast__unit unit-past",children:[Object(W.jsx)("p",{className:"unit-past__date",children:n}),t.weather.map((function(e){var t="http://openweathermap.org/img/wn/"+e.icon+"@2x.png";return Object(W.jsx)("img",{className:"unit-past__image",src:t,alt:e.description},e.id)})),Object(W.jsxs)("div",{className:"unit-past__tmp",children:[Object(W.jsx)("span",{className:"unit-past__num",children:a>=0?"+".concat(a):a}),Object(W.jsx)("span",{children:"\xb0"})]})]})}),$=function(){var e=U((function(e){return e.app})).loadingPastForecast,t=Object(O.c)((function(e){return e.pastData}));return Object(W.jsxs)("article",{className:"card-forcast card-forcast--past",children:[Object(W.jsx)("h3",{className:"card-forcast__title card-forcast__title--left",children:"Forecast for a Date in the Past"}),Object(W.jsxs)("form",{className:"card-forcast__select select-past",children:[Object(W.jsx)(z,{}),Object(W.jsx)(X,{})]}),e?Object(W.jsx)(M,{}):t.hourly?Object(W.jsx)(Z,{}):Object(W.jsx)(q,{})]})},ee=(n(63),function(){return Object(W.jsxs)("header",{className:"main-title",children:[Object(W.jsx)("h2",{children:"Weather"}),Object(W.jsx)("h2",{children:"forecast"})]})}),te=(n(64),n(65),function(){return Object(W.jsx)("footer",{className:"footer",children:Object(W.jsx)("p",{children:"C \u041b\u042e\u0411\u041e\u0412\u042c\u042e \u041e\u0422 MERCURY DEVELOPMENT"})})}),ne=function(){return Object(W.jsxs)("div",{className:"wrapper",children:[Object(W.jsx)(ee,{}),Object(W.jsxs)("main",{className:"container",children:[Object(W.jsx)(B,{}),Object(W.jsx)($,{})]}),Object(W.jsx)(te,{})]})},ae=n(21),ce=n(22),re={loading7DaysForecast:!1,loadingPastForecast:!1},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.SHOW_LOADER_FORECAST:return Object(h.a)(Object(h.a)({},e),{},{loading7DaysForecast:!0});case i.HIDE_LOADER_FORECAST:return Object(h.a)(Object(h.a)({},e),{},{loading7DaysForecast:!1});case i.SHOW_LOADER_PAST:return Object(h.a)(Object(h.a)({},e),{},{loadingPastForecast:!0});case i.HIDE_LOADER_PAST:return Object(h.a)(Object(h.a)({},e),{},{loadingPastForecast:!1});default:return e}},ie={},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.FETCH_7DAYSFORECAST:return t.data;default:return e}},oe={},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.FETCH_PAST_FORECAST:return t.data;default:return e}},de={unixDate:null,cityLocation:null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.GET_DATE:return Object(h.a)(Object(h.a)({},e),{},{unixDate:t.unixDate});case u.GET_LOCATION:return Object(h.a)(Object(h.a)({},e),{},{cityLocation:t.cityLocation});default:return e}},fe=Object(b.combineReducers)({app:se,forecastData:ue,pastData:le,pastCardInfo:je}),Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},pe=Object(b.createStore)(fe,Object(ae.composeWithDevTools)(Object(b.applyMiddleware)(ce.a))),be=Object(W.jsx)(O.a,{store:pe,children:Object(W.jsx)(ne,{})});l.a.render(be,document.getElementById("root")),Oe()}},[[66,1,2]]]);
//# sourceMappingURL=main.a583d5e2.chunk.js.map