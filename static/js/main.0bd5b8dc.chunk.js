(this["webpackJsonpcreate-react-app-ts"]=this["webpackJsonpcreate-react-app-ts"]||[]).push([[0],{28:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a,c,r,s=n(7),i=n.n(s),u=(n(28),n(1)),o=n.n(u),l=n(23),d=n(2),j=(n(35),n(36),n(6)),f=n.n(j),O=n(11),p=n(8),b=n.n(p),h=b.a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),_=b.a.CancelToken.source(),m=b.a.isCancel;function v(){return{type:r.SHOW_LOADER_FORECAST}}function x(){return{type:r.HIDE_LOADER_FORECAST}}function E(){return{type:r.HIDE_LOADER_PAST}}!function(e){e.FETCH_7DAYSFORECAST="FETCH_7DAYSFORECAST"}(a||(a={})),function(e){e.FETCH_PAST_FORECAST="FETCH_PAST_FORECAST"}(c||(c={})),function(e){e.SHOW_LOADER_FORECAST="SHOW_LOADER_FORECAST",e.HIDE_LOADER_FORECAST="HIDE_LOADER_FORECAST",e.SHOW_LOADER_PAST="SHOW_LOADER_PAST",e.HIDE_LOADER_PAST="HIDE_LOADER_PAST"}(r||(r={}));var T="43970c1fd0eb1ec3e95ad78e5bda6745";function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var c=Object(O.a)(f.a.mark((function c(r){var s,i;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,r(v()),s="/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=").concat(n,"&units=metric&appid=").concat(T),c.next=5,h.get(s,{cancelToken:_.token});case 5:i=c.sent,r({type:a.FETCH_7DAYSFORECAST,data:i.data}),r(x()),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(0),m(c.t0)?(console.log("Request canceled",c.t0.message),r(x())):r(x());case 13:case"end":return c.stop()}}),c,null,[[0,10]])})));return function(e){return c.apply(this,arguments)}}()}function A(){return function(){var e=Object(O.a)(f.a.mark((function e(t,n){var a,s,i,u,o,l,d,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),s=a.pastCardInfo,i=s.unixDate,u=s.cityLocation,null!==i&&null!==u){e.next=5;break}return e.abrupt("return");case 5:return o=u.lat,l=u.lon,e.prev=6,t({type:r.SHOW_LOADER_PAST}),d="/onecall/timemachine?lat=".concat(o,"&lon=").concat(l,"&dt=").concat(i,"&units=metric&appid=").concat(T),e.next=11,h.get(d,{cancelToken:_.token});case 11:j=e.sent,t({type:c.FETCH_PAST_FORECAST,data:j.data}),t(E()),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),m(e.t0)?(console.log("Request canceled",e.t0.message),t(E())):t(E());case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t,n){return e.apply(this,arguments)}}()}var D=[{name:"Select city",disabled:!0,hidden:!0},{name:"\u0421\u0430\u043c\u0430\u0440\u0430",lat:"53.195873"},{name:"\u0422\u043e\u043b\u044c\u044f\u0442\u0442\u0438",lat:"53.507836"},{name:"\u0421\u0430\u0440\u0430\u0442\u043e\u0432",lat:"51.533557"},{name:"\u041a\u0430\u0437\u0430\u043d\u044c",lat:"55.796127"},{name:"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440",lat:"45.035470"}],S=n(0),w=function(e){var t=e.data,n=Object(d.b)(),a=["select-future__city",Object.keys(t).length?"select-future__city--active":null];return Object(S.jsx)("form",{className:"card-forcast__select select-future",children:Object(S.jsx)("select",{onChange:function(e){var t=e.target.value;switch(t){case"53.195873":return n(g(t,"50.100193"));case"53.507836":return n(g(t,"49.420393"));case"51.533557":return n(g(t,"46.034257"));case"55.796127":return n(g(t,"49.106405"));case"45.035470":return n(g(t,"38.975313"));default:return}},className:a.join(" "),defaultValue:"Select city",children:D.map((function(e){return Object(S.jsx)("option",{value:e.lat,disabled:e.disabled,hidden:e.hidden,children:e.name},e.name)}))})})},C=(n(57),function(){return Object(S.jsx)("div",{className:"loader-centre",children:Object(S.jsxs)("div",{className:"lds-roller",children:[Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{})]})})});function y(e){var t=new Date(1e3*e),n=t.getDate();n<10&&(n="0"+n);var a=t.getFullYear();return n+" "+function(){switch(t.getMonth()+1){case 1:return"jan";case 2:return"feb";case 3:return"mar";case 4:return"apr";case 5:return"may";case 6:return"jun";case 7:return"jul";case 8:return"aug";case 9:return"sep";case 10:return"oct";case 11:return"nov";case 12:return"dec";default:return}}()+" "+a}n(58);var R,N=function(e){var t,n=Object(d.c)((function(e){return e.forecastData}));if(window.screen.width>768&&e.data.length)t=e.data;else if(window.screen.width<768)t=n.daily;else{t=[0,1,2].map((function(e){return n.daily[e]}))}return t.map((function(e){var t=y(e.dt),n=Math.round(e.temp.eve);return Object(S.jsxs)("div",{className:"unit-forecast",children:[Object(S.jsx)("p",{className:"unit-forecast__date",children:t}),e.weather.map((function(e){var t="http://openweathermap.org/img/wn/"+e.icon+"@2x.png";return Object(S.jsx)("img",{className:"unit-forecast__image",src:t,alt:e.description},e.id)})),Object(S.jsxs)("div",{className:"unit-forecast__tmp",children:[Object(S.jsx)("span",{className:"unit-forecast__num",children:n>=0?"+".concat(n):n}),Object(S.jsx)("span",{children:"\xb0"})]})]},e.dt)}))},F=n.p+"static/media/placeholder.1a7907bc.svg",L=(n(59),function(){return Object(S.jsxs)(o.a.Fragment,{children:[Object(S.jsx)("img",{className:"card-forcast__placeholder",src:F,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0432\u043c\u0435\u0441\u0442\u043e \u043f\u043e\u0433\u043e\u0434\u044b"}),Object(S.jsx)("p",{className:"card-forcast__text",children:"Fill in all the fields and the weather will be displayed"})]})}),H=function(){var e=Object(d.c)((function(e){return e.app.loadingForecast})),t=Object(d.c)((function(e){return e.forecastData})),n=Object(u.useRef)([0,1,2]),a=Object(u.useState)([]),c=Object(l.a)(a,2),r=c[0],s=c[1],i=n.current.includes(7),o=n.current.includes(0),j=["arrow arrow-prev",o?"arrow--disabled":""],f=["arrow arrow-next",i?"arrow--disabled":""];return Object(S.jsxs)("article",{className:"card-forcast card-forcast--future",children:[Object(S.jsx)("h3",{className:"card-forcast__title",children:"7 Days Forecast"}),Object(S.jsx)(w,{data:t}),e?Object(S.jsx)(C,{}):t.hourly?Object(S.jsx)("div",{className:"card-forcast__wrapper",children:Object(S.jsxs)("div",{className:"card-forcast__overflow",children:[Object(S.jsx)(N,{data:r}),Object(S.jsx)("div",{className:j.join(" ").trim(),onClick:function(){if(!o){var e=n.current.map((function(e){return e-1}));n.current=e;var a=e.map((function(e){return t.daily[e]}));s((function(e){return a}))}}}),Object(S.jsx)("div",{className:f.join(" ").trim(),onClick:function(){if(!i){var e=n.current.map((function(e){return e+1}));n.current=e;var a=e.map((function(e){return t.daily[e]}));s((function(e){return a}))}}})]})}):Object(S.jsx)(L,{})]})};n(60);function P(e,t){return function(n){n({type:R.GET_LOCATION,cityLocation:{lat:e,lon:t}}),n(A())}}!function(e){e.GET_DATE="GET_DATE",e.GET_LOCATION="GET_LOCATION"}(R||(R={}));var I=d.c,k=function(){var e=Object(d.b)(),t=["select-past__city",null===I((function(e){return e.pastCardInfo.cityLocation}))?null:"select-past__city--active"];return Object(S.jsx)("select",{onChange:function(t){var n=t.target.value;switch(n){case"53.195873":return e(P(n,"50.100193"));case"53.507836":return e(P(n,"49.420393"));case"51.533557":return e(P(n,"46.034257"));case"55.796127":return e(P(n,"49.106405"));case"45.035470":return e(P(n,"38.975313"));default:return}},className:t.join(" ").trim(),defaultValue:"Select city",children:D.map((function(e){return Object(S.jsx)("option",{value:e.lat,disabled:e.disabled,hidden:e.hidden,children:e.name},e.name)}))})};n(61);var W=(new Date).getTime(),G=new Date(W-432e6).toJSON().slice(0,10),M=function(){var e=I((function(e){return e.pastCardInfo.unixDate})),t=Object(u.useRef)(null),n=Object(u.useRef)(null);Object(u.useEffect)((function(){var a=t.current,c=n.current,r=function(){c.classList.add("select-past__hide-placeholder")},s=function(){c.classList.remove("select-past__hide-placeholder")};return a.addEventListener("focus",r),e||a.addEventListener("blur",s),function(){a.removeEventListener("focus",r),a.removeEventListener("blur",s)}}),[e]);var a=Object(d.b)(),c=["select-past__date",null===e?null:"select-past__date--active"];return Object(S.jsxs)("div",{className:"select-past__wrapper",ref:n,children:[Object(S.jsx)("input",{className:c.join(" ").trim(),type:"date",ref:t,onChange:function(e){var t=e.target.value,n=new Date("".concat(t)).getTime()/1e3;n>Date.now()/1e3||(a(function(e){return{type:R.GET_DATE,unixDate:e}}(n)),a(A()))},min:G,max:(new Date).toJSON().slice(0,10)}),Object(S.jsx)("p",{className:"select-past__placeholder",children:"Select date"})]})},Y=(n(62),function(){var e=Object(d.c)((function(e){return e.pastData})),t=e.hourly[11],n=y(e.current.dt),a=Math.round(t.temp);return Object(S.jsxs)("div",{className:"card-forcast__unit unit-past",children:[Object(S.jsx)("p",{className:"unit-past__date",children:n}),t.weather.map((function(e){var t="http://openweathermap.org/img/wn/"+e.icon+"@2x.png";return Object(S.jsx)("img",{className:"unit-past__image",src:t,alt:e.description},e.id)})),Object(S.jsxs)("div",{className:"unit-past__tmp",children:[Object(S.jsx)("span",{className:"unit-past__num",children:a>=0?"+".concat(a):a}),Object(S.jsx)("span",{children:"\xb0"})]})]})}),J=function(){var e=I((function(e){return e.app.loadingPast})),t=Object(d.c)((function(e){return e.pastData}));return Object(S.jsxs)("article",{className:"card-forcast card-forcast--past",children:[Object(S.jsx)("h3",{className:"card-forcast__title card-forcast__title--left",children:"Forecast for a Date in the Past"}),Object(S.jsxs)("form",{className:"card-forcast__select select-past",children:[Object(S.jsx)(k,{}),Object(S.jsx)(M,{})]}),e?Object(S.jsx)(C,{}):t.hourly?Object(S.jsx)(Y,{}):Object(S.jsx)(L,{})]})},V=(n(63),function(){return Object(S.jsxs)("header",{className:"main-title",children:[Object(S.jsx)("h2",{children:"Weather"}),Object(S.jsx)("h2",{children:"forecast"})]})}),q=(n(64),n(65),function(){return Object(S.jsx)("footer",{className:"footer",children:Object(S.jsx)("p",{children:"C \u041b\u042e\u0411\u041e\u0412\u042c\u042e \u041e\u0422 MERCURY DEVELOPMENT"})})}),B=function(){return Object(S.jsxs)("div",{className:"wrapper",children:[Object(S.jsx)(V,{}),Object(S.jsxs)("main",{className:"container",children:[Object(S.jsx)(H,{}),Object(S.jsx)(J,{})]}),Object(S.jsx)(q,{})]})},U=n(5),z=n(21),K=n(22),Q=n(3),X={loadingForecast:!1,loadingPast:!1},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SHOW_LOADER_FORECAST:return Object(Q.a)(Object(Q.a)({},e),{},{loadingForecast:!0});case r.HIDE_LOADER_FORECAST:return Object(Q.a)(Object(Q.a)({},e),{},{loadingForecast:!1});case r.SHOW_LOADER_PAST:return Object(Q.a)(Object(Q.a)({},e),{},{loadingPast:!0});case r.HIDE_LOADER_PAST:return Object(Q.a)(Object(Q.a)({},e),{},{loadingPast:!1});default:return e}},$={},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.FETCH_7DAYSFORECAST:return t.data;default:return e}},te={},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.FETCH_PAST_FORECAST:return t.data;default:return e}},ae={unixDate:null,cityLocation:null},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.GET_DATE:return Object(Q.a)(Object(Q.a)({},e),{},{unixDate:t.unixDate});case R.GET_LOCATION:return Object(Q.a)(Object(Q.a)({},e),{},{cityLocation:t.cityLocation});default:return e}},re=Object(U.combineReducers)({app:Z,forecastData:ee,pastData:ne,pastCardInfo:ce}),se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},ie=Object(U.createStore)(re,Object(z.composeWithDevTools)(Object(U.applyMiddleware)(K.a))),ue=Object(S.jsx)(d.a,{store:ie,children:Object(S.jsx)(B,{})});i.a.render(ue,document.getElementById("root")),se()}},[[66,1,2]]]);
//# sourceMappingURL=main.0bd5b8dc.chunk.js.map