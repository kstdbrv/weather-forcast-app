(this["webpackJsonpcreate-react-app-ts"]=this["webpackJsonpcreate-react-app-ts"]||[]).push([[0],{28:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n.n(a),r=(n(28),n(1)),s=n.n(r),i=n(23),u=n(2),o=(n(35),n(36),n(6)),l=n.n(o),d=n(11),j=n(8),f=n.n(j),p=f.a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),b=f.a.CancelToken.source(),O=f.a.isCancel,h="APP/SHOW_LOADER_FORECAST",m="APP/SHOW_LOADER_PAST",v="APP/HIDE_LOADER_FORECAST",x="APP/HIDE_LOADER_PAST",_="FETCH_7DAYSFORECAST",g="FETCH_PAST_FORECAST",w="GET_DATE",y="GET_LOCATION",N="HANDLE_NEXT",D="HANDLE_PREV";function E(){return{type:h}}function C(){return{type:v}}function L(){return{type:x}}var T="43970c1fd0eb1ec3e95ad78e5bda6745";function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var a=Object(d.a)(l.a.mark((function a(c){var r,s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c(E()),r="/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=").concat(n,"&units=metric&appid=").concat(T),a.next=5,p.get(r,{cancelToken:b.token});case 5:s=a.sent,c({type:_,data:s.data}),c(C()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),O(a.t0)?(console.log("Request canceled",a.t0.message),c(C())):c(C());case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}function P(){return function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,c,r,s,i,u,o,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),c=a.pastCardInfo,r=c.unixDate,s=c.cityLocation,null!==r&&null!==s){e.next=5;break}return e.abrupt("return");case 5:return i=s.lat,u=s.lon,e.prev=6,t({type:m}),o="/onecall/timemachine?lat=".concat(i,"&lon=").concat(u,"&dt=").concat(r,"&units=metric&appid=").concat(T),e.next=11,p.get(o,{cancelToken:b.token});case 11:d=e.sent,t({type:g,data:d.data}),t(L()),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),O(e.t0)?(console.log("Request canceled",e.t0.message),t(L())):t(L());case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t,n){return e.apply(this,arguments)}}()}var F=[{name:"Select city",disabled:!0,hidden:!0},{name:"\u0421\u0430\u043c\u0430\u0440\u0430",lat:"53.195873"},{name:"\u0422\u043e\u043b\u044c\u044f\u0442\u0442\u0438",lat:"53.507836"},{name:"\u0421\u0430\u0440\u0430\u0442\u043e\u0432",lat:"51.533557"},{name:"\u041a\u0430\u0437\u0430\u043d\u044c",lat:"55.796127"},{name:"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440",lat:"45.035470"}],S=n(0),R=function(e){var t=e.data,n=Object(u.b)(),a=["select-future__city",Object.keys(t).length?"select-future__city--active":null];return Object(S.jsx)("form",{className:"card-forcast__select select-future",children:Object(S.jsx)("select",{onChange:function(e){var t=e.target.value;switch(t){case"53.195873":return n(A(t,"50.100193"));case"53.507836":return n(A(t,"49.420393"));case"51.533557":return n(A(t,"46.034257"));case"55.796127":return n(A(t,"49.106405"));case"45.035470":return n(A(t,"38.975313"));default:return}},className:a.join(" "),defaultValue:"Select city",children:F.map((function(e){return Object(S.jsx)("option",{value:e.lat,disabled:e.disabled,hidden:e.hidden,children:e.name},e.name)}))})})},k=(n(57),function(){return Object(S.jsx)("div",{className:"loader-centre",children:Object(S.jsxs)("div",{className:"lds-roller",children:[Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{})]})})});function I(e){var t=new Date(1e3*e),n=t.getDate();n<10&&(n="0"+n);var a=t.getFullYear();return n+" "+function(){switch(t.getMonth()+1){case 1:return"jan";case 2:return"feb";case 3:return"mar";case 4:return"apr";case 5:return"may";case 6:return"jun";case 7:return"jul";case 8:return"aug";case 9:return"sep";case 10:return"oct";case 11:return"nov";case 12:return"dec";default:return}}()+" "+a}function H(e){var t=Math.round(e);return t=function(){if(e>=0)return"+"+t.toString()}()}n(58);var M=function(e){var t,n=Object(u.c)((function(e){return e.forecastData}));if(window.screen.width>768&&e.data.length)t=e.data;else if(window.screen.width<768)t=n.daily;else{t=[0,1,2].map((function(e){return n.daily[e]}))}return t.map((function(e){var t=I(e.dt),n=H(e.temp.eve);return Object(S.jsxs)("div",{className:"unit-forecast",children:[Object(S.jsx)("p",{className:"unit-forecast__date",children:t}),e.weather.map((function(e){var t="http://openweathermap.org/img/wn/"+e.icon+"@2x.png";return Object(S.jsx)("img",{className:"unit-forecast__image",src:t,alt:e.description},e.id)})),Object(S.jsxs)("div",{className:"unit-forecast__tmp",children:[Object(S.jsx)("span",{className:"unit-forecast__num",children:n}),Object(S.jsx)("span",{children:"\xb0"})]})]},e.dt)}))},V=n.p+"static/media/placeholder.a6938fd6.svg",W=(n(59),function(){return Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)("img",{className:"card-forcast__placeholder",src:V,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0432\u043c\u0435\u0441\u0442\u043e \u043f\u043e\u0433\u043e\u0434\u044b"}),Object(S.jsx)("p",{className:"card-forcast__text",children:"Fill in all the fields and the weather will be displayed"})]})}),Y=function(){var e=Object(u.c)((function(e){return e.app.loadingForecast})),t=Object(u.c)((function(e){return e.forecastData})),n=Object(r.useRef)([0,1,2]),a=Object(r.useState)([]),c=Object(i.a)(a,2),s=c[0],o=c[1],l=n.current.includes(7),d=n.current.includes(0),j=["arrow arrow-prev",d?"arrow--disabled":""],f=["arrow arrow-next",l?"arrow--disabled":""];return Object(S.jsxs)("article",{className:"card-forcast card-forcast--future",children:[Object(S.jsx)("h3",{className:"card-forcast__title",children:"7 Days Forecast"}),Object(S.jsx)(R,{data:t}),e?Object(S.jsx)(k,{}):t.hourly?Object(S.jsx)("div",{className:"card-forcast__wrapper",children:Object(S.jsxs)("div",{className:"card-forcast__overflow",children:[Object(S.jsx)(M,{data:s}),Object(S.jsx)("div",{className:j.join(" ").trim(),onClick:function(){if(!d){var e=n.current.map((function(e){return e-1}));n.current=e;var a=e.map((function(e){return t.daily[e]}));o((function(e){return a}))}}}),Object(S.jsx)("div",{className:f.join(" ").trim(),onClick:function(){if(!l){var e=n.current.map((function(e){return e+1}));n.current=e,console.log("nextCards",e);var a=e.map((function(e){return t.daily[e]}));o((function(e){return a}))}}})]})}):Object(S.jsx)(W,{})]})};n(60);function q(e,t){return function(n){n({type:y,cityLocation:{lat:e,lon:t}}),n(P())}}var B=function(){var e=Object(u.b)(),t=["select-past__city",null===Object(u.c)((function(e){return e.pastCardInfo.cityLocation}))?null:"select-past__city--active"];return Object(S.jsx)("select",{onChange:function(t){var n=t.target.value;switch(n){case"53.195873":return e(q(n,"50.100193"));case"53.507836":return e(q(n,"49.420393"));case"51.533557":return e(q(n,"46.034257"));case"55.796127":return e(q(n,"49.106405"));case"45.035470":return e(q(n,"38.975313"));default:return}},className:t.join(" ").trim(),defaultValue:"Select city",children:F.map((function(e){return Object(S.jsx)("option",{value:e.lat,disabled:e.disabled,hidden:e.hidden,children:e.name},e.name)}))})};n(61);var G=function(){var e=Object(u.c)((function(e){return e.pastCardInfo.unixDate})),t=Object(r.useRef)(null),n=Object(r.useRef)(null);Object(r.useEffect)((function(){var a=t.current,c=n.current,r=function(){c.classList.add("select-past__hide-placeholder")},s=function(){c.classList.remove("select-past__hide-placeholder")};return a.addEventListener("focus",r),e||a.addEventListener("blur",s),function(){a.removeEventListener("focus",r),a.removeEventListener("blur",s)}}),[e]);var a=Object(u.b)(),c=["select-past__date",null===e?null:"select-past__date--active"];return Object(S.jsxs)("div",{className:"select-past__wrapper",ref:n,children:[Object(S.jsx)("input",{className:c.join(" ").trim(),type:"date",ref:t,onChange:function(e){var t=e.target.value,n=new Date("".concat(t)).getTime()/1e3;n>Date.now()/1e3||(a(function(e){return{type:w,unixDate:e}}(n)),a(P()))}}),Object(S.jsx)("p",{className:"select-past__placeholder",children:"Select date"})]})},J=(n(62),function(){var e=Object(u.c)((function(e){return e.pastData})),t=e.hourly[11],n=I(e.current.dt),a=H(t.temp);return Object(S.jsxs)("div",{className:"card-forcast__unit unit-past",children:[Object(S.jsx)("p",{className:"unit-past__date",children:n}),t.weather.map((function(e){var t="http://openweathermap.org/img/wn/"+e.icon+"@2x.png";return Object(S.jsx)("img",{className:"unit-past__image",src:t,alt:e.description},e.id)})),Object(S.jsxs)("div",{className:"unit-past__tmp",children:[Object(S.jsx)("span",{className:"unit-past__num",children:a}),Object(S.jsx)("span",{children:"\xb0"})]})]})}),U=function(){var e=Object(u.c)((function(e){return e.app.loadingPast})),t=Object(u.c)((function(e){return e.pastData}));return Object(S.jsxs)("article",{className:"card-forcast card-forcast--past",children:[Object(S.jsx)("h3",{className:"card-forcast__title card-forcast__title--left",children:"Forecast for a Date in the Past"}),Object(S.jsxs)("form",{className:"card-forcast__select select-past",children:[Object(S.jsx)(B,{}),Object(S.jsx)(G,{})]}),e?Object(S.jsx)(k,{}):t.hourly?Object(S.jsx)(J,{}):Object(S.jsx)(W,{})]})},X=(n(63),function(){return Object(S.jsxs)("header",{className:"main-title",children:[Object(S.jsx)("h2",{children:"Weather"}),Object(S.jsx)("h2",{children:"forecast"})]})}),z=(n(64),n(65),function(){return Object(S.jsx)("footer",{className:"footer",children:Object(S.jsx)("p",{children:"C \u041b\u042e\u0411\u041e\u0412\u042c\u042e \u041e\u0422 MERCURY DEVELOPMENT"})})}),K=function(){return Object(S.jsxs)("div",{className:"wrapper",children:[Object(S.jsx)(X,{}),Object(S.jsxs)("main",{className:"container",children:[Object(S.jsx)(Y,{}),Object(S.jsx)(U,{})]}),Object(S.jsx)(z,{})]})},Q=n(5),Z=n(21),$=n(22),ee=n(3),te={loadingForecast:!1,loadingPast:!1},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(ee.a)(Object(ee.a)({},e),{},{loadingForecast:!0});case v:return Object(ee.a)(Object(ee.a)({},e),{},{loadingForecast:!1});case m:return Object(ee.a)(Object(ee.a)({},e),{},{loadingPast:!0});case x:return Object(ee.a)(Object(ee.a)({},e),{},{loadingPast:!1});default:return e}},ae={},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.data;default:return e}},re={},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.data;default:return e}},ie={unixDate:null,cityLocation:null},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(ee.a)(Object(ee.a)({},e),{},{unixDate:t.unixDate});case y:return Object(ee.a)(Object(ee.a)({},e),{},{cityLocation:t.cityLocation});default:return e}},oe=[0,1,2],le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:case N:return t.cards;default:return e}},de=Object(Q.combineReducers)({app:ne,forecastData:ce,pastData:se,pastCardInfo:ue,cardsToShow:le}),je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},fe=Object(Q.createStore)(de,Object(Z.composeWithDevTools)(Object(Q.applyMiddleware)($.a))),pe=Object(S.jsx)(u.a,{store:fe,children:Object(S.jsx)(K,{})});c.a.render(pe,document.getElementById("root")),je()}},[[66,1,2]]]);
//# sourceMappingURL=main.a2148570.chunk.js.map