(this["webpackJsonpcreate-react-app-ts"]=this["webpackJsonpcreate-react-app-ts"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"showLoaderForcast",(function(){return v})),n.d(r,"hideLoaderForcast",(function(){return g})),n.d(r,"showLoaderPast",(function(){return m})),n.d(r,"hideLoaderPast",(function(){return _}));var a={};n.r(a),n.d(a,"getDate",(function(){return x}));var c={};n.r(c),n.d(c,"fetch7DayForecast",(function(){return k})),n.d(c,"fetchPastForecast",(function(){return P}));var o={};n.r(o),n.d(o,"getLocation",(function(){return H}));var i,s,l=n(7),u=n.n(l),d=(n(28),n(1)),f=n.n(d),j=n(8),O=(n(29),n(30),[{name:"Select city",disabled:!0,hidden:!0},{name:"\u0421\u0430\u043c\u0430\u0440\u0430",lat:"53.195873"},{name:"\u0422\u043e\u043b\u044c\u044f\u0442\u0442\u0438",lat:"53.507836"},{name:"\u0421\u0430\u0440\u0430\u0442\u043e\u0432",lat:"51.533557"},{name:"\u041a\u0430\u0437\u0430\u043d\u044c",lat:"55.796127"},{name:"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440",lat:"45.035470"},{name:"\u0421urrent location",lat:"current"}]),p=n(3),h=n(5),b=n(2);function v(){return{type:i.SHOW_LOADER_FORECAST}}function g(){return{type:i.HIDE_LOADER_FORECAST}}function m(){return{type:i.SHOW_LOADER_PAST}}function _(){return{type:i.HIDE_LOADER_PAST}}function x(e){return{type:s.GET_DATE,unixDate:e}}!function(e){e.SHOW_LOADER_FORECAST="SHOW_LOADER_FORECAST",e.HIDE_LOADER_FORECAST="HIDE_LOADER_FORECAST",e.SHOW_LOADER_PAST="SHOW_LOADER_PAST",e.HIDE_LOADER_PAST="HIDE_LOADER_PAST"}(i||(i={})),function(e){e.GET_DATE="GET_DATE",e.GET_LOCATION="GET_LOCATION"}(s||(s={}));var w,E,y=n(6),D=n.n(y),S=n(12),A=n(9),T=n.n(A),C=T.a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),L=T.a.CancelToken.source(),N=T.a.isCancel;!function(e){e.FETCH_7DAYSFORECAST="FETCH_7DAYSFORECAST"}(w||(w={})),function(e){e.FETCH_PAST_FORECAST="FETCH_PAST_FORECAST"}(E||(E={}));var F=function(e){!function(e){if(!e)return!1;var t="number"===typeof e.code,n="string"===typeof e.message;return t&&n}(e)?console.log("something is not an server error"):console.error("Error code: ".concat(e.code,", message: ").concat(e.message))},R="43970c1fd0eb1ec3e95ad78e5bda6745";function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var r=Object(S.a)(D.a.mark((function r(a){var c,o;return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(v()),c="/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=").concat(n,"&units=metric&appid=").concat(R),r.next=5,C.get(c,{cancelToken:L.token});case 5:o=r.sent,a({type:w.FETCH_7DAYSFORECAST,data:o.data}),a(g()),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),F(r.t0),N(r.t0)?(console.log("Request canceled",r.t0.message),a(g())):a(g());case 14:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()}function P(){return function(){var e=Object(S.a)(D.a.mark((function e(t,n){var r,a,c,o,i,s,l,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.pastCardInfo,c=a.unixDate,o=a.cityLocation,null!==c&&null!==o){e.next=5;break}return e.abrupt("return");case 5:return i=o.lat,s=o.lon,e.prev=6,t(m()),l="/onecall/timemachine?lat=".concat(i,"&lon=").concat(s,"&dt=").concat(c,"&units=metric&appid=").concat(R),e.next=11,C.get(l,{cancelToken:L.token});case 11:u=e.sent,t({type:E.FETCH_PAST_FORECAST,data:u.data}),t(_()),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),F(e.t0),N(e.t0)?(console.log("Request canceled",e.t0.message),t(_())):t(_());case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t,n){return e.apply(this,arguments)}}()}function H(e,t){return function(n){n({type:s.GET_LOCATION,cityLocation:{lat:e,lon:t}}),n(P())}}var I=Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},r),a),o),c),W=function(){var e=Object(p.b)();return Object(h.bindActionCreators)(I,e)};function M(e){switch(e.code){case e.PERMISSION_DENIED:console.error("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:console.error("Location information is unavailable.");break;case e.TIMEOUT:console.error("The request to get user location timed out.");break;default:console.error("Code: ".concat(e.code,": ").concat(e.message))}}var G=n(0),U=function(e){var t=e.forecast7DaysData,n=W().fetch7DayForecast,r={enableHighAccuracy:!0,timeout:1500,maximumAge:0},a=function(e){var t=e.coords.latitude.toString(),r=e.coords.longitude.toString();n(t,r)},c=["select-future__city",Object.keys(t).length?"select-future__city--active":null];return Object(G.jsx)("form",{className:"card-forcast__select select-future",children:Object(G.jsx)("select",{onChange:function(e){if("current"===e.target.value){navigator.geolocation&&navigator.geolocation.getCurrentPosition(a,M,r)}var t=e.target.value;switch(t){case"53.195873":return n(t,"50.100193");case"53.507836":return n(t,"49.420393");case"51.533557":return n(t,"46.034257");case"55.796127":return n(t,"49.106405");case"45.035470":return n(t,"38.975313");default:return}},className:c.join(" "),defaultValue:"Select city",children:O.map((function(e){return Object(G.jsx)("option",{value:e.lat,disabled:e.disabled,hidden:e.hidden,children:e.name},e.name)}))})})},B=(n(57),function(){return Object(G.jsx)("div",{className:"loader-centre",children:Object(G.jsxs)("div",{className:"lds-roller",children:[Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{})]})})});function V(e){var t=new Date(1e3*e),n=t.getDate();n<10&&(n="0"+n);var r=t.getFullYear();return n+" "+function(){switch(t.getMonth()+1){case 1:return"jan";case 2:return"feb";case 3:return"mar";case 4:return"apr";case 5:return"may";case 6:return"jun";case 7:return"jul";case 8:return"aug";case 9:return"sep";case 10:return"oct";case 11:return"nov";case 12:return"dec";default:return}}()+" "+r}n(58);var Y,q=function(e){var t,n=Object(p.c)((function(e){return e.forecastData}));if(window.screen.width>768&&e.currentShowCards.length)t=e.currentShowCards;else if(window.screen.width<768)t=n.daily;else{t=[0,1,2].map((function(e){return n.daily[e]}))}return t.map((function(e){var t=V(e.dt),n=Math.round(e.temp.eve);return Object(G.jsxs)("div",{className:"unit-forecast",children:[Object(G.jsx)("p",{className:"unit-forecast__date",children:t}),e.weather.map((function(e){var t="http://openweathermap.org/img/wn/"+e.icon+"@2x.png";return Object(G.jsx)("img",{className:"unit-forecast__image",src:t,alt:e.description},e.id)})),Object(G.jsxs)("div",{className:"unit-forecast__tmp",children:[Object(G.jsx)("span",{className:"unit-forecast__num",children:n>=0?"+".concat(n):n}),Object(G.jsx)("span",{children:"\xb0"})]})]},e.dt)}))},J=n.p+"static/media/placeholder.1a7907bc.svg",z=(n(59),function(){return Object(G.jsxs)(f.a.Fragment,{children:[Object(G.jsx)("img",{className:"card-forcast__placeholder",src:J,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0432\u043c\u0435\u0441\u0442\u043e \u043f\u043e\u0433\u043e\u0434\u044b"}),Object(G.jsx)("p",{className:"card-forcast__text",children:"Fill in all the fields and the weather will be displayed"})]})}),X=p.c,$=function(){var e=X((function(e){return e.app})).loading7DaysForecast,t=Object(p.c)((function(e){return e.forecastData})),n=Object(d.useRef)([0,1,2]),r=Object(d.useState)([]),a=Object(j.a)(r,2),c=a[0],o=a[1],i=n.current.includes(7),s=n.current.includes(0),l=["arrow arrow-prev",s?"arrow--disabled":""],u=["arrow arrow-next",i?"arrow--disabled":""];return Object(G.jsxs)("article",{className:"card-forcast card-forcast--future",children:[Object(G.jsx)("h3",{className:"card-forcast__title",children:"7 Days Forecast"}),Object(G.jsx)(U,{forecast7DaysData:t}),e?Object(G.jsx)(B,{}):t.daily?Object(G.jsx)("div",{className:"card-forcast__wrapper",children:Object(G.jsxs)("div",{className:"card-forcast__overflow",children:[Object(G.jsx)(q,{currentShowCards:c}),Object(G.jsx)("button",{className:l.join(" ").trim(),onClick:function(){if(!s){var e=n.current.map((function(e){return e-1}));n.current=e;var r=e.map((function(e){return t.daily[e]}));o((function(e){return r}))}}}),Object(G.jsx)("button",{className:u.join(" ").trim(),onClick:function(){if(!i){var e=n.current.map((function(e){return e+1}));n.current=e;var r=e.map((function(e){return t.daily[e]}));o((function(e){return r}))}}})]})}):Object(G.jsx)(z,{})]})},K=(n(60),function(){var e=W().getLocation,t=X((function(e){return e.pastCardInfo.cityLocation})),n={enableHighAccuracy:!0,timeout:1500,maximumAge:0},r=function(t){var n=t.coords.latitude.toString(),r=t.coords.longitude.toString();e(n,r)},a=["select-past__city",null===t?null:"select-past__city--active"];return Object(G.jsx)("select",{onChange:function(t){if("current"===t.target.value){navigator.geolocation&&navigator.geolocation.getCurrentPosition(r,M,n)}var a=t.target.value;switch(a){case"53.195873":return e(a,"50.100193");case"53.507836":return e(a,"49.420393");case"51.533557":return e(a,"46.034257");case"55.796127":return e(a,"49.106405");case"45.035470":return e(a,"38.975313");default:return}},className:a.join(" ").trim(),defaultValue:"Select city",children:O.map((function(e){return Object(G.jsx)("option",{value:e.lat,disabled:e.disabled,hidden:e.hidden,children:e.name},e.name)}))})}),Q=(n(61),(new Date).getTime()),Z=new Date(Q-432e6).toJSON().slice(0,10),ee=function(){var e=X((function(e){return e.pastCardInfo})).unixDate,t=Object(d.useRef)(null),n=Object(d.useRef)(null);Object(d.useEffect)((function(){var r=t.current,a=n.current,c=function(){a.classList.add("select-past__hide-placeholder")},o=function(){a.classList.remove("select-past__hide-placeholder")};return r.addEventListener("focus",c),e||r.addEventListener("blur",o),function(){r.removeEventListener("focus",c),r.removeEventListener("blur",o)}}),[e]);var r=W(),a=r.getDate,c=r.fetchPastForecast,o=["select-past__date",null===e?null:"select-past__date--active"];return Object(G.jsxs)("div",{className:"select-past__wrapper",ref:n,children:[Object(G.jsx)("input",{className:o.join(" ").trim(),type:"date",ref:t,onChange:function(e){var t=e.target.value,n=new Date("".concat(t)).getTime()/1e3;n>Date.now()/1e3||(a(n),c())},min:Z,max:(new Date).toJSON().slice(0,10)}),Object(G.jsx)("p",{className:"select-past__placeholder",children:"Select date"})]})},te=(n(62),function(){var e=Object(p.c)((function(e){return e.pastData})),t=e.hourly[11],n=V(e.current.dt),r=Math.round(t.temp);return Object(G.jsxs)("div",{className:"card-forcast__unit unit-past",children:[Object(G.jsx)("p",{className:"unit-past__date",children:n}),t.weather.map((function(e){var t="http://openweathermap.org/img/wn/"+e.icon+"@2x.png";return Object(G.jsx)("img",{className:"unit-past__image",src:t,alt:e.description},e.id)})),Object(G.jsxs)("div",{className:"unit-past__tmp",children:[Object(G.jsx)("span",{className:"unit-past__num",children:r>=0?"+".concat(r):r}),Object(G.jsx)("span",{children:"\xb0"})]})]})}),ne=function(){var e=X((function(e){return e.app})).loadingPastForecast,t=Object(p.c)((function(e){return e.pastData}));return Object(G.jsxs)("article",{className:"card-forcast card-forcast--past",children:[Object(G.jsx)("h3",{className:"card-forcast__title card-forcast__title--left",children:"Forecast for a Date in the Past"}),Object(G.jsxs)("form",{className:"card-forcast__select select-past",children:[Object(G.jsx)(K,{}),Object(G.jsx)(ee,{})]}),e?Object(G.jsx)(B,{}):t.hourly?Object(G.jsx)(te,{}):Object(G.jsx)(z,{})]})};function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ce(e,t){var n=e.title,r=e.titleId,a=ae(e,["title","titleId"]);return d.createElement("svg",re({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?d.createElement("title",{id:r},n):null,Y||(Y=d.createElement("path",{d:"M378.6,206.6C367.2,149.2,316.7,106,256,106c-24.6,0-47.5,7.2-66.8,19.5l24.3,24.3c12.8-6.6,27.2-10.5,42.5-10.5 c50.7,0,91.7,41,91.7,91.7v8.3h25c27.6,0,50,22.4,50,50c0,18.9-10.6,35.2-26.1,43.7l24.2,24.2c21.2-15.1,35.2-39.8,35.2-67.8 C456,245.3,421.8,209.7,378.6,206.6z M106,127.3l45.8,45.7c-53.2,2.2-95.8,46-95.8,99.7c0,55.3,44.7,100,100,100h195.4l33.3,33.3 l21.2-21.2L127.3,106L106,127.3z M184.8,206l133.3,133.3H156c-36.8,0-66.7-29.8-66.7-66.7S119.2,206,156,206H184.8z"})))}var oe=d.forwardRef(ce),ie=(n.p,n(63),function(){Object(d.useEffect)((function(){a(),window.addEventListener("online",a),window.addEventListener("offline",a)}),[]);var e=Object(d.useState)(!0),t=Object(j.a)(e,2),n=t[0],r=t[1],a=function(){navigator.onLine?r(!0):r(!1)};return Object(G.jsxs)("header",{className:"main-title",children:[!n&&Object(G.jsx)(oe,{className:"status-icon",title:"offline"}),Object(G.jsx)("h2",{children:"Weather"}),Object(G.jsx)("h2",{children:"forecast"})]})}),se=(n(64),n(65),function(){return Object(G.jsx)("footer",{className:"footer",children:Object(G.jsx)("p",{children:"C \u041b\u042e\u0411\u041e\u0412\u042c\u042e \u041e\u0422 MERCURY DEVELOPMENT"})})}),le=function(){return Object(G.jsxs)("div",{className:"wrapper",children:[Object(G.jsx)(ie,{}),Object(G.jsxs)("main",{className:"container",children:[Object(G.jsx)($,{}),Object(G.jsx)(ne,{})]}),Object(G.jsx)(se,{})]})},ue=n(22),de=n(23),fe={loading7DaysForecast:!1,loadingPastForecast:!1},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.SHOW_LOADER_FORECAST:return Object(b.a)(Object(b.a)({},e),{},{loading7DaysForecast:!0});case i.HIDE_LOADER_FORECAST:return Object(b.a)(Object(b.a)({},e),{},{loading7DaysForecast:!1});case i.SHOW_LOADER_PAST:return Object(b.a)(Object(b.a)({},e),{},{loadingPastForecast:!0});case i.HIDE_LOADER_PAST:return Object(b.a)(Object(b.a)({},e),{},{loadingPastForecast:!1});default:return e}},Oe={},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.FETCH_7DAYSFORECAST:return Object(b.a)(Object(b.a)({},e),t.data);default:return e}},he={},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.FETCH_PAST_FORECAST:return t.data;default:return e}},ve={unixDate:null,cityLocation:null},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.GET_DATE:return Object(b.a)(Object(b.a)({},e),{},{unixDate:t.unixDate});case s.GET_LOCATION:return Object(b.a)(Object(b.a)({},e),{},{cityLocation:t.cityLocation});default:return e}},me=Object(h.combineReducers)({app:je,forecastData:pe,pastData:be,pastCardInfo:ge}),_e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}console.log(navigator);var Ee=Object(h.createStore)(me,Object(ue.composeWithDevTools)(Object(h.applyMiddleware)(de.a))),ye=Object(G.jsx)(p.a,{store:Ee,children:Object(G.jsx)(le,{})});u.a.render(ye,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(console.log("works serviceWorker register"),new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");xe?(console.log("isLocalhost"),function(e,t){console.log("checkValidServiceWorker"),fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");console.log(r),404===n.status||null!=r&&-1===r.indexOf("javascript")?(console.log("No service worker found"),navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))}))):(we(e,t),console.log("registerValidSW"))})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):we(t,e)}))}}(),_e()}},[[66,1,2]]]);
//# sourceMappingURL=main.c3c4348a.chunk.js.map